{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page_title|default:"Listado" }} — DeadWorld</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'css/header.css' %}">
  <link rel="stylesheet" href="{% static 'css/catalog-list.css' %}">
  <link rel="stylesheet" href="{% static 'css/footer.css' %}">
  <link rel="stylesheet" href="{% static 'css/toast.css' %}">  {# para la animación del toast #}
</head>
<body class="page-catalog">

  {% include 'partials/header.html' %}

  <main class="catalog" aria-label="Listado de productos">
    <section class="grid container" aria-live="polite">
      <!-- Placeholders de prueba con precios en COP -->
      <article class="pcard">
        <a href="#" class="pcard__media" aria-label="Ver producto">
          <img src="{% static 'img/camisasTest/Camisa4.png' %}" alt="Camisa 1">
          <button class="pcard__wish" aria-label="Agregar a Wishlist" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20.8 8.6c0 5.6-7.8 9.9-8.8 10.4-.1.1-.3.1-.5 0C10.6 18.5 2.8 14.2 2.8 8.6 2.8 6 4.9 4 7.4 4c1.5 0 2.9.7 3.8 1.9C12.1 4.7 13.5 4 15 4c2.5 0 4.6 2 4.6 4.6z" fill="none" stroke="currentColor" stroke-width="1.6"/>
            </svg>
          </button>
          <span class="pcard__price">$ 120.000</span>
        </a>
        <h3 class="pcard__title"><a href="#">EUROTRASH FOOTBALL SHIRT</a></h3>
      </article>

      <article class="pcard">
        <a href="#" class="pcard__media" aria-label="Ver producto">
          <img src="{% static 'img/camisasTest/Camisa3.png' %}" alt="Camisa 2">
          <button class="pcard__wish" aria-label="Agregar a Wishlist" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20.8 8.6c0 5.6-7.8 9.9-8.8 10.4-.1.1-.3.1-.5 0C10.6 18.5 2.8 14.2 2.8 8.6 2.8 6 4.9 4 7.4 4c1.5 0 2.9.7 3.8 1.9C12.1 4.7 13.5 4 15 4c2.5 0 4.6 2 4.6 4.6z" fill="none" stroke="currentColor" stroke-width="1.6"/>
            </svg>
          </button>
          <span class="pcard__price">$ 380.000</span>
        </a>
        <h3 class="pcard__title"><a href="#">VENOM JACKET</a></h3>
      </article>

      <article class="pcard">
        <a href="#" class="pcard__media" aria-label="Ver producto">
          <img src="{% static 'img/camisasTest/Camisa1.png' %}" alt="Camisa 3">
          <button class="pcard__wish" aria-label="Agregar a Wishlist" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20.8 8.6c0 5.6-7.8 9.9-8.8 10.4-.1.1-.3.1-.5 0C10.6 18.5 2.8 14.2 2.8 8.6 2.8 6 4.9 4 7.4 4c1.5 0 2.9 .7 3.8 1.9C12.1 4.7 13.5 4 15 4c2.5 0 4.6 2 4.6 4.6z" fill="none" stroke="currentColor" stroke-width="1.6"/>
            </svg>
          </button>
          <span class="pcard__price">$ 299.900</span>
        </a>
        <h3 class="pcard__title"><a href="#">VENOM TROUSERS</a></h3>
      </article>

      <article class="pcard">
        <a href="#" class="pcard__media" aria-label="Ver producto">
          <img src="{% static 'img/camisasTest/Camisa2.png' %}" alt="Camisa 4">
          <button class="pcard__wish" aria-label="Agregar a Wishlist" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20.8 8.6c0 5.6-7.8 9.9-8.8 10.4-.1.1-.3.1-.5 0C10.6 18.5 2.8 14.2 2.8 8.6 2.8 6 4.9 4 7.4 4c1.5 0 2.9 .7 3.8 1.9C12.1 4.7 13.5 4 15 4c2.5 0 4.6 2 4.6 4.6z" fill="none" stroke="currentColor" stroke-width="1.6"/>
            </svg>
          </button>
          <span class="pcard__price">$ 420.000</span>
        </a>
        <h3 class="pcard__title"><a href="#">DOOMSHINE HOODIE</a></h3>
      </article>
    </section>
  </main>

  {% include 'partials/footer.html' %}
  {% include 'partials/toast.html' %}

  <script>
    // Header activo en esta vista
    document.addEventListener('DOMContentLoaded', function () {
      document.body.classList.add('scrolled');

      // Bind a todos los corazones de la lista
      const cards = document.querySelectorAll('.pcard');
      cards.forEach(card => {
        const wishBtn = card.querySelector('.pcard__wish');
        if (!wishBtn) return;

        wishBtn.addEventListener('click', (e) => {
          e.preventDefault();          // evita navegar por estar dentro del <a>
          e.stopPropagation();

          // título e imagen del producto
          const title = card.querySelector('.pcard__title a')?.textContent?.trim() || 'Producto';
          const img   = card.querySelector('.pcard__media img')?.getAttribute('src') || '';

          // dispara el toast con animación (usa el partial toast.html)
          if (window.DWToast) {
            DWToast.show({
              title,
              meta: 'Añadido a tu wishlist.',
              image: img
            });
          }
        });
      });
    });
  </script>
</body>
</html>
